<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/locomotive-scroll@3.5.4/dist/locomotive-scroll.css">
    
    <link rel="stylesheet" href="assets/css/reset.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/locomotive.css">

    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
</head>

<body>

    <header id="header">
        <a href="#" class="left">frontend</a>
        <h1>portfolio</h1>
        <a href="#" class="right">seungbo</a>
    </header>
    <!-- //header -->

    <div class="container">
        <section id="section1" data-textcolor="#bcb8ad" data-bgcolor="#032f35">
            <div class="sec1_text">
                <div class="t1" data-scroll data-scroll-speed="1" data-scroll-direction="horizontal">SEUNGBO</div>
                <div class="t2" data-scroll data-scroll-speed="4" data-scroll-direction="horizontal"><span>the</span>FRONTEND<span>DEVELOPER</span></div>
                <div class="t3" data-scroll data-scroll-speed="2" data-scroll-direction="horizontal">PORTFOLIO</div>
            </div>
        </section>
        <section id="section2" class="horizontal-scroll" data-textcolor="#bcb8ad" data-bgcolor="#815946">
            <div class="pin-wrap">
                <div class="sec2_1">
                    <h2 class="show">복잡성을 통제하는 것이 컴퓨터 프로그래밍의 기초다</h2>
                </div>
                <div class="sec2_2">
                    <div class="title">
                        <div class="imgWrap">
                            <div class="img"></div>
                        </div>
                        <div class="desc move">
                            <h3>코딩에 푹 빠져 시간 가는 줄 모르던 아이</h3>
                            <p>
                                어린 시절을 회상하면, 가장 먼저 투박한 컴퓨터가 떠오릅니다. 넉넉지 않은 형편에도, 남매를 위해 부모님께서 사주신 컴퓨터. 누나는 갑자기 등장한 요물단지에 관심이 없었지만, 저는 단번에 홀려버리고 말았습니다. 특히 코딩을 이리저리 만져보며, 간단한 프로그램을 만드는 게 얼마나 재밌었는지 모릅니다. 컴퓨터에 대한 사랑은 저를 고등학교도 ‘IT 학과’, 대학교도 ‘컴퓨터 정보과’로 들어가도록 이끌었습니다. 학교에 가서는 반대표로서 조교님과 과대표를 도와 졸업 작품전, 교내 행사 등을 성실히 준비했습니다.
                            </p>
                        </div>
                    </div>
                </div>
                <div class="sec2_3">
                    <div class="title">
                        <div class="desc">
                            <h3>코딩에 푹 빠져 시간 가는 줄 모르던 아이</h3>
                            <p>
                                어린 시절을 회상하면, 가장 먼저 투박한 컴퓨터가 떠오릅니다. 넉넉지 않은 형편에도, 남매를 위해 부모님께서 사주신 컴퓨터. 누나는 갑자기 등장한 요물단지에 관심이 없었지만, 저는 단번에 홀려버리고 말았습니다. 특히 코딩을 이리저리 만져보며, 간단한 프로그램을 만드는 게 얼마나 재밌었는지 모릅니다.
                            </p>
                        </div>
                        <div class="imgWrap">
                            <div class="img move"></div>
                        </div>
                    </div>
                </div>
                <div class="sec2_4">
                    <div class="title">
                        <div class="imgWrap">
                            <div class="img"></div>
                        </div>
                        <div class="desc move">
                            <h3>코딩에 푹 빠져 시간 가는 줄 모르던 아이</h3>
                            <p>
                                어린 시절을 회상하면, 가장 먼저 투박한 컴퓨터가 떠오릅니다. 넉넉지 않은 형편에도, 남매를 위해 부모님께서 사주신 컴퓨터. 누나는 갑자기 등장한 요물단지에 관심이 없었지만, 저는 단번에 홀려버리고 말았습니다. 특히 코딩을 이리저리 만져보며, 간단한 프로그램을 만드는 게 얼마나 재밌었는지 모릅니다. 컴퓨터에 대한 사랑은 저를 고등학교도 ‘IT 학과’, 대학교도 ‘컴퓨터 정보과’로 들어가도록 이끌었습니다. 학교에 가서는 반대표로서 조교님과 과대표를 도와 졸업 작품전, 교내 행사 등을 성실히 준비했습니다.
                            </p>
                        </div>
                    </div>
                </div>
                <div class="sec2_5">
                    ddd
                </div>
            </div>
        </section>
        <section id="section3" data-textcolor="#032f35" data-bgcolor="#bcb8ad">
            section3
        </section>

        <section id="section4" data-bgcolor="#e3857a" data-textcolor="#f1dba7">
            section4
        </section>

        <section id="section5" class="horizontal-scroll" data-textcolor="#bcb8ad" data-bgcolor="#815946">
            <div class="pin-wrap">
                <h2>This whole horizontal section should be brown</h2>
                <img src="https://images.pexels.com/photos/5207262/pexels-photo-5207262.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=900"
                    alt="">
                <img src="https://images.pexels.com/photos/3371358/pexels-photo-3371358.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=900"
                    alt="">
                <img src="https://images.pexels.com/photos/3618545/pexels-photo-3618545.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=900"
                    alt="">
            </div>
        </section>
        <section id="section6" data-textcolor="#032f35" data-bgcolor="#bcb8ad">
            section6
        </section>

        <section id="section7" data-bgcolor="#e3857a" data-textcolor="#f1dba7">
            section7 
        </section>
    </div>

    <script src="https://unpkg.com/gsap@3/dist/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.5.1/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/locomotive-scroll@3.5.4/dist/locomotive-scroll.min.js"></script>
    <script>

        gsap.set(".show", {opacity: 0, y: 100 })

        function scroll() {
            const move = document.querySelector(".move");

            console.log(move.getBoundingClientRect())

            if(move.getBoundingClientRect().x < 0 + window.innerWidth){
                gsap.to(".move", {x: move.getBoundingClientRect().x/20})
            }

            const show = document.querySelectorAll(".show");

            show.forEach((item) => {
                if(item.getBoundingClientRect().x < 0 + window.innerWidth/2){
                    gsap.to(item, {opacity: 1, y:0, duration: 0.6})
                } 
            })
            requestAnimationFrame(scroll);
        }
        scroll();

        window.addEventListener("load", function () {
            gsap.registerPlugin(ScrollTrigger);

            const pageContainer = document.querySelector(".container");
            pageContainer.setAttribute("data-scroll-container", "");

            const scroller = new LocomotiveScroll({
                el: pageContainer,
                smooth: true,
                getDirection: true,
            });

            scroller.on("scroll", function (t) {
                document.documentElement.setAttribute("data-direction", t.direction);
            });

            scroller.on("scroll", ScrollTrigger.update);
            

            ScrollTrigger.scrollerProxy(pageContainer, {
                scrollTop(value) {
                    return arguments.length ?
                        scroller.scrollTo(value, 0, 0) :
                        scroller.scroll.instance.scroll.y;
                },
                getBoundingClientRect() {
                    return {
                        left: 0,
                        top: 0,
                        width: window.innerWidth,
                        height: window.innerHeight
                    };
                },
                pinType: pageContainer.style.transform ? "transform" : "fixed"
            });
            console.log(scroller.scroll.instance.scroll.y)
            

            let horizontalSections = document.querySelectorAll(".horizontal-scroll");

            horizontalSections.forEach((horizontalSection) => {
                let pinWrap = horizontalSection.querySelector(".pin-wrap");
                let pinWrapWidth = pinWrap.offsetWidth;
                let horizontalScrollLength = pinWrapWidth - window.innerWidth;
                gsap.to(pinWrap, {
                    scrollTrigger: {
                        scroller: "[data-scroll-container]",
                        scrub: true,
                        trigger: horizontalSection,
                        pin: true,
                        start: "top top",
                        end: () => `+=${pinWrapWidth}`,
                        invalidateOnRefresh: true,
                        markers: true
                    },
                    x: -horizontalScrollLength,
                    ease: "none"
                });
            });

            /* 배경색 변경하기 */
            const scrollColorElems = document.querySelectorAll("[data-bgcolor]");

            scrollColorElems.forEach((colorSection, i) => {
                const prevBg = i === 0 ? "" : scrollColorElems[i - 1].dataset.bgcolor;
                const prevText = i === 0 ? "" : scrollColorElems[i - 1].dataset.textcolor;

                ScrollTrigger.create({
                    trigger: colorSection,
                    scroller: "[data-scroll-container]",
                    start: "top 50%",
                    onEnter: () =>
                        gsap.to("body", {
                            backgroundColor: colorSection.dataset.bgcolor,
                            color: colorSection.dataset.textcolor,
                            overwrite: "auto"
                        }),
                    onLeaveBack: () =>
                        gsap.to("body", {
                            backgroundColor: prevBg,
                            color: prevText,
                            overwrite: "auto"
                        })
                });
            });

            ScrollTrigger.addEventListener("refresh", () => scroller.update());
            ScrollTrigger.refresh();
        });
    </script>
</body>

</html>